!function(e){function t(t){for(var s,r,n=t[0],h=t[1],d=t[2],p=0,m=[];p<n.length;p++)r=n[p],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&m.push(o[r][0]),o[r]=0;for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(e[s]=h[s]);for(l&&l(t);m.length;)m.shift()();return a.push.apply(a,d||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],s=!0,n=1;n<i.length;n++){var h=i[n];0!==o[h]&&(s=!1)}s&&(a.splice(t--,1),e=r(r.s=i[0]))}return e}var s={},o={0:0},a=[];function r(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=s,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(i,s,function(t){return e[t]}.bind(null,s));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var n=window.webpackJsonp=window.webpackJsonp||[],h=n.push.bind(n);n.push=t,n=n.slice();for(var d=0;d<n.length;d++)t(n[d]);var l=h;a.push([2,1]),i()}({2:function(e,t,i){"use strict";i.r(t);var s=i(0),o=i.n(s),a={type:o.a.AUTO,parent:"game",backgroundColor:"#33A5E7",scale:{width:500,height:320,mode:o.a.Scale.FIT,autoCenter:o.a.Scale.CENTER_BOTH},render:{pixelArt:!0},audio:{noAudio:!0},physics:{default:"arcade",arcade:{gravity:{y:750},debug:!1,debugShowVelocity:!0,debugShowBody:!0,debugShowStaticBody:!0}}},r=i(1),n=i.n(r);class h extends o.a.GameObjects.Sprite{constructor(e,t,i){super(e,t,i,"hero-run-sheet",0),this.setOrigin(.5,1),e.add.existing(this),e.physics.add.existing(this),this.anims.play("hero-running"),this.body.setCollideWorldBounds(!0),this.body.setSize(12,40),this.body.setOffset(12,23),this.body.setMaxVelocity(250,400),this.body.setDragX(750),this.keys=e.cursorKeys,this.input={},this.setupAnimation(),this.setupMovement()}setupAnimation(){this.animState=new n.a({init:"idle",transitions:[{name:"idle",from:["falling","running","pivoting"],to:"idle"},{name:"run",from:["falling","idle","pivoting"],to:"running"},{name:"pivot",from:["falling","running"],to:"pivoting"},{name:"jump",from:["idle","running","pivoting"],to:"jumping"},{name:"flip",from:["jumping","falling"],to:"fliping"},{name:"fall",from:["idle","running","pivoting","jumping","fliping"],to:"falling"},{name:"die",from:"*",to:"dead"}],methods:{onEnterState:e=>{this.anims.play("hero-"+e.to),console.log(e)}}}),this.animPredicates={idle:()=>this.body.onFloor()&&0===this.body.velocity.x,run:()=>this.body.onFloor()&&Math.sign(this.body.velocity.x)===(this.flipX?-1:1),pivot:()=>this.body.onFloor()&&Math.sign(this.body.velocity.x)===(this.flipX?1:-1),jump:()=>this.body.velocity.y<0,flip:()=>this.body.velocity.y<0&&this.moveState.is("flipping"),fall:()=>this.body.velocity.y>0}}setupMovement(){this.moveState=new n.a({init:"standing",transitions:[{name:"jump",from:"standing",to:"jumping"},{name:"flip",from:"jumping",to:"flipping"},{name:"fall",from:"standing",to:"falling"},{name:"touchdown",from:["jumping","flipping","falling"],to:"standing"},{name:"die",from:["jumping","flipping","falling","standing"],to:"dead"}],methods:{onJump:()=>{this.body.setVelocityY(-400)},onFlip:()=>{this.body.setVelocityY(-300)},onDie:()=>{this.body.setVelocity(0,-500),this.body.setAcceleration(0)}}}),this.movePredicates={jump:()=>this.input.didPressJump,flip:()=>this.input.didPressJump,fall:()=>!this.body.onFloor(),touchdown:()=>this.body.onFloor()}}kill(){this.moveState.can("die")&&(this.moveState.die(),this.animState.die(),this.emit("died"))}isDead(){return this.moveState.is("dead")}preUpdate(e,t){super.preUpdate(e,t),this.input.didPressJump=!this.isDead()&&o.a.Input.Keyboard.JustDown(this.keys.up),!this.isDead()&&this.keys.left.isDown?(this.body.setAccelerationX(-1e3),this.setFlipX(!0),this.body.offset.x=8):!this.isDead()&&this.keys.right.isDown?(this.body.setAccelerationX(1e3),this.setFlipX(!1),this.body.offset.x=12):this.body.setAccelerationX(0),(this.moveState.is("jumping")||this.moveState.is("flipping"))&&!this.keys.up.isDown&&this.body.velocity.y<-150&&this.body.setVelocityY(-150);for(const e of this.moveState.transitions())if(e in this.movePredicates&&this.movePredicates[e]()){this.moveState[e]();break}for(const e of this.animState.transitions())if(e in this.animPredicates&&this.animPredicates[e]()){this.animState[e]();break}}}var d=h;class l extends o.a.Scene{constructor(){super({key:"GameScene"})}init(e){}preload(){this.load.tilemapTiledJSON("level-1","assets/tilemaps/level-1.json"),this.load.spritesheet("world-1-sheet","assets/tilesets/world-1.png",{frameWidth:32,frameHeight:32,margin:1,spacing:2}),this.load.image("clouds-sheet","assets/tilesets/clouds.png"),this.load.spritesheet("hero-idle-sheet","assets/hero/idle.png",{frameWidth:32,frameHeight:64}),this.load.spritesheet("hero-run-sheet","assets/hero/run.png",{frameWidth:32,frameHeight:64}),this.load.spritesheet("hero-pivot-sheet","assets/hero/pivot.png",{frameWidth:32,frameHeight:64}),this.load.spritesheet("hero-jump-sheet","assets/hero/jump.png",{frameWidth:32,frameHeight:64}),this.load.spritesheet("hero-flip-sheet","assets/hero/spinjump.png",{frameWidth:32,frameHeight:64}),this.load.spritesheet("hero-fall-sheet","assets/hero/fall.png",{frameWidth:32,frameHeight:64}),this.load.spritesheet("hero-die-sheet","assets/hero/bonk.png",{frameWidth:32,frameHeight:64})}create(e){this.cursorKeys=this.input.keyboard.createCursorKeys(),this.anims.create({key:"hero-idle",frames:this.anims.generateFrameNumbers("hero-idle-sheet"),frameRate:10,repeat:-1}),this.anims.create({key:"hero-running",frames:this.anims.generateFrameNumbers("hero-run-sheet"),frameRate:10,repeat:-1}),this.anims.create({key:"hero-pivoting",frames:this.anims.generateFrameNumbers("hero-pivot-sheet"),frameRate:10,repeat:-1}),this.anims.create({key:"hero-jumping",frames:this.anims.generateFrameNumbers("hero-jump-sheet"),frameRate:10,repeat:-1}),this.anims.create({key:"hero-fliping",frames:this.anims.generateFrameNumbers("hero-flip-sheet"),frameRate:30,repeat:0}),this.anims.create({key:"hero-falling",frames:this.anims.generateFrameNumbers("hero-fall-sheet"),frameRate:10,repeat:-1}),this.anims.create({key:"hero-dead",frames:this.anims.generateFrameNumbers("hero-die-sheet")}),this.addMap(),this.addHero()}addHero(){this.hero=new d(this,this.spawnPos.x,this.spawnPos.y),this.children.moveTo(this.hero,this.children.getIndex(this.map.getLayer("Foreground").tilemapLayer));const e=this.physics.add.collider(this.hero,this.map.getLayer("Ground").tilemapLayer),t=this.physics.add.overlap(this.hero,this.spikeGroup,()=>{this.hero.kill()});this.hero.on("died",()=>{e.destroy(),t.destroy(),this.hero.body.setCollideWorldBounds(!1),this.cameras.main.stopFollow()}),this.cameras.main.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.cameras.main.startFollow(this.hero)}addMap(){this.map=this.make.tilemap({key:"level-1"});const e=this.map.addTilesetImage("world-1","world-1-sheet"),t=this.map.addTilesetImage("clouds","clouds-sheet");this.map.createStaticLayer("Background",t).setScrollFactor(.6);this.map.createStaticLayer("Ground",e).setCollision([1,2,4],!0),this.physics.world.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.physics.world.setBoundsCollision(!0,!0,!1,!0),this.spikeGroup=this.physics.add.group({immovable:!0,allowGravity:!1}),this.map.getObjectLayer("Objects").objects.forEach(e=>{if("Start"===e.name&&(this.spawnPos={x:e.x,y:e.y}),7===e.gid){const t=this.spikeGroup.create(e.x,e.y,"world-1-sheet",e.gid-1);t.setOrigin(0,1),t.setSize(e.width-10,e.height-10),t.setOffset(5,10)}}),this.map.createStaticLayer("Foreground",e)}update(e,t){const i=this.cameras.main.getWorldPoint(0,this.cameras.main.height).y;this.hero.isDead()&&this.hero.getBounds().top>i+100&&(this.hero.destroy(),this.addHero())}}var p=l;new o.a.Game(Object.assign(a,{scene:[p]}))}});